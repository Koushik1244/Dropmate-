DropMate MVP Frontend - Build Prompt & Specification
ğŸ¯ MINIMAL VIABLE FRONTEND
Build a single-page web application for DropMate MVP with the following core features only:

1. TECH STACK (Minimal)
text
Framework: React 18 + TypeScript
Styling: Tailwind CSS
State Management: React Context + useState
Blockchain: ethers.js (wallet connection)
Maps: Leaflet.js (lightweight)
Real-time: WebSocket for live GPS
Build Tool: Vite
2. CORE PAGES (5 pages total)
Page 1: Auth/Wallet Connection
Components:

Logo + title ("DropMate")

Two buttons: "Connect as Customer" | "Connect as Driver"

Wallet selection dropdown (MetaMask, Stellar, etc.)

Connected wallet address display

State: isConnected, userRole, walletAddress

No Form: Just wallet connection

Page 2: Customer Dashboard
After login, customer sees:

Header: Connected wallet + balance (XLM/USD)

Main Action: Large "Request Ride" button

Active Ride Card (if ride exists):

Ride ID

Driver name + rating (â­ 4.5/5)

Driver location map (Leaflet)

Estimated arrival time

Status: "Driver en route" | "Arrived" | "In progress"

Cancel button

Ride History: Last 3 completed rides (minimal card view)

Page 3: Ride Request Modal
Popup when customer clicks "Request Ride":

Form Fields (minimal):

Pickup location (text input or map click)

Dropoff location (text input or map click)

Fare estimate (auto-calculated) â†’ "Estimated: $5.50"

Stake amount (pre-filled from estimate + 15% buffer)

Buttons:

"Request Ride" (submits to backend)

"Cancel"

Loading State: Spinner while waiting for driver

Page 4: Driver Dashboard
After login, driver sees:

Header: Connected wallet + balance + reputation score (55/100)

Available Rides List:

Cards showing: Pickup location, dropoff, fare, customer rating

"Accept Ride" button on each

Auto-refresh every 3 seconds

Active Ride Card (if ride accepted):

Customer name + rating

Pickup location with map

Dropoff location

Fare amount

"Start Ride" button (once at pickup)

"Complete Ride" button (once at destination)

Navigation: Toggle between "Available Rides" and "Active Ride"

Page 5: Ride In-Progress
Both customer and driver see (shared view):

Live Map (Leaflet):

Driver's current location (red pin)

Dropoff location (blue pin)

Route line connecting them

Real-time position updates via WebSocket

Stats Panel:

Distance remaining: "2.3 km"

Est. time: "8 minutes"

Current fare: "$4.20"

Driver/Customer name + rating

Driver-only buttons: "Complete Ride" (when at destination)

Customer-only button: "Panic" (emergency - triggers alert)

3. MINIMAL API ENDPOINTS NEEDED (Backend)
text
POST /api/auth/connect
â”œâ”€ Input: { walletAddress, role: "customer"|"driver" }
â””â”€ Output: { token, user: { id, role, reputation, balance } }

POST /api/rides/request
â”œâ”€ Input: { pickup, dropoff, estimatedFare, stakedAmount, customerId }
â””â”€ Output: { rideId, status: "waiting", createdAt }

GET /api/rides/available
â”œâ”€ Output: [{ rideId, pickup, dropoff, fare, customerRating }]

POST /api/rides/{rideId}/accept
â”œâ”€ Input: { driverId }
â””â”€ Output: { rideId, status: "accepted", driverId }

POST /api/rides/{rideId}/complete
â”œâ”€ Input: { completedBy: "customer"|"driver", rating?, feedback? }
â””â”€ Output: { rideId, status: "completed", paymentTxHash }

GET /api/rides/{rideId}
â”œâ”€ Output: { rideId, status, driver, customer, currentLocation, fare }

WebSocket /ws/ride/{rideId}
â”œâ”€ Subscribe to live GPS updates
â””â”€ Receives: { lat, lng, timestamp, speed }

GET /api/user/profile
â”œâ”€ Output: { id, reputation, completedRides, avgRating, balance }
4. UI/UX FLOW (Simplified)
text
START
â”œâ”€ User lands on app
â”‚  â”œâ”€ Clicks "Connect Wallet"
â”‚  â”œâ”€ Selects role (Customer or Driver)
â”‚  â””â”€ MetaMask popup confirms
â”‚
â”œâ”€ IF CUSTOMER:
â”‚  â”œâ”€ Dashboard: "Request Ride" button prominent
â”‚  â”œâ”€ Click â†’ Modal opens (pickup/dropoff form)
â”‚  â”œâ”€ Enter locations â†’ Fare shows automatically
â”‚  â”œâ”€ Click "Request Ride"
â”‚  â”œâ”€ Waiting screen (spinner + "Waiting for driver...")
â”‚  â”œâ”€ Driver accepts â†’ Live map appears
â”‚  â”œâ”€ Driver arrives â†’ Status changes
â”‚  â”œâ”€ Ride ends â†’ Rate driver screen pops up
â”‚  â””â”€ Back to dashboard
â”‚
â””â”€ IF DRIVER:
   â”œâ”€ Dashboard: List of available rides
   â”œâ”€ Click "Accept Ride"
   â”œâ”€ Active ride shows pickup location + "Start Ride" button
   â”œâ”€ At pickup: Click "Start Ride"
   â”œâ”€ Live map shows route + customer's current fare
   â”œâ”€ Arrive at destination: Click "Complete Ride"
   â”œâ”€ Confirmation â†’ Back to available rides list
   â””â”€ Reputation updated
5. COMPONENT STRUCTURE (React)
text
src/
â”œâ”€ App.tsx
â”œâ”€ context/
â”‚  â”œâ”€ AuthContext.tsx (wallet, user role, balance)
â”‚  â””â”€ RideContext.tsx (active ride, rides list)
â”œâ”€ pages/
â”‚  â”œâ”€ AuthPage.tsx
â”‚  â”œâ”€ CustomerDashboard.tsx
â”‚  â”œâ”€ DriverDashboard.tsx
â”‚  â”œâ”€ RideInProgress.tsx
â”‚  â””â”€ RideRequestModal.tsx
â”œâ”€ components/
â”‚  â”œâ”€ Header.tsx (logo, wallet, balance)
â”‚  â”œâ”€ LiveMap.tsx (Leaflet map)
â”‚  â”œâ”€ RideCard.tsx (ride display)
â”‚  â”œâ”€ RideHistory.tsx (past rides)
â”‚  â”œâ”€ RatingPopup.tsx (rate driver/customer)
â”‚  â””â”€ Spinner.tsx (loading state)
â”œâ”€ hooks/
â”‚  â”œâ”€ useWallet.ts (connect/disconnect)
â”‚  â”œâ”€ useRide.ts (fetch, accept, complete rides)
â”‚  â”œâ”€ useWebSocket.ts (live GPS updates)
â”‚  â””â”€ useGeolocation.ts (get user's current location)
â”œâ”€ services/
â”‚  â”œâ”€ api.ts (all API calls)
â”‚  â”œâ”€ blockchain.ts (Soroban contract interaction)
â”‚  â””â”€ ws.ts (WebSocket client)
â”œâ”€ styles/
â”‚  â””â”€ globals.css (Tailwind)
â””â”€ types/
   â””â”€ index.ts (TypeScript interfaces)
6. KEY STATE MANAGEMENT (Context)
AuthContext
typescript
{
  walletAddress: string | null,
  userRole: "customer" | "driver" | null,
  balance: number, // XLM
  isConnected: boolean,
  reputation: number, // 0-100
}
RideContext
typescript
{
  activeRide: {
    rideId: string,
    status: "waiting" | "accepted" | "in_progress" | "completed",
    driver?: { name, address, rating },
    customer?: { name, address, rating },
    pickup: { lat, lng },
    dropoff: { lat, lng },
    currentLocation: { lat, lng },
    fare: number,
    createdAt: timestamp,
  } | null,
  availableRides: Ride[],
  rideHistory: Ride[],
}
7. STYLING APPROACH (Tailwind)
Colors:

Primary: Teal (ride-sharing theme)

Success: Green (completed rides)

Danger: Red (cancellations, errors)

Neutral: Gray (backgrounds)

Spacing: Follow Tailwind defaults (4px base unit)

Responsive: Mobile-first (sm, md, lg breakpoints)

Cards: Light shadow, rounded corners

Buttons: Large tap targets (min 44px)

8. MINIMAL FEATURES (MVP ONLY)
âœ… Include:

Wallet connection

Customer: Request ride

Driver: Accept ride, complete ride

Live map tracking

Fare display

Simple rating (1-5 stars)

Ride history

Balance display

âŒ Exclude (for later):

Surge pricing UI

Reputation staking

Dispute system

Advanced analytics

Push notifications

Profile settings

Payment methods

Referral code system

9. BUILD INSTRUCTIONS
bash
# Create Vite project
npm create vite@latest dropmate-web -- --template react-ts

# Install dependencies
cd dropmate-web
npm install

# Core packages needed
npm install react-router-dom axios leaflet react-leaflet ethers

# Dev dependencies
npm install -D tailwindcss postcss autoprefixer
npx tailwindcss init -p

# Start dev server
npm run dev

# Build for production
npm run build
10. ENVIRONMENT VARIABLES (.env.local)
text
VITE_API_URL=http://localhost:8000
VITE_WS_URL=ws://localhost:8000
VITE_STELLAR_NETWORK=testnet
VITE_SOROBAN_CONTRACT_ADDRESS=C...
11. QUICK START MOCKUP FLOWS
Customer Request Ride Flow
text
1. User lands â†’ "Connect Wallet" button
2. Select "Customer" role
3. MetaMask connects â†’ Dashboard loads
4. Shows: "Request Ride" button + balance ($0 initially for testnet)
5. Click button â†’ Modal: Enter "Central Station" â†’ "Airport"
6. Auto-calculates: $5.50 fare, $6.33 stake (with buffer)
7. Click "Request Ride"
8. Loading spinner for 5-10 seconds
9. Backend finds driver
10. "Driver assigned" â†’ Shows driver name + rating
11. Live map shows driver approaching
12. Countdown: "Driver arrives in 3 min"
13. Driver arrives â†’ "In Progress" state
14. Live map centers on route
15. Shows distance remaining + eta
16. Driver completes â†’ Rating popup
17. Rate: â­â­â­â­â­ + "Great driver!"
18. Back to dashboard
Driver Accept Ride Flow
text
1. Driver dashboard loads
2. Shows 5 available rides in a list:
   - "Market Street â†’ Airport" ($5.50, â­4.2 customer)
   - etc.
3. Driver clicks "Accept" on one
4. Becomes "Active Ride"
5. Map shows pickup location
6. Driver navigates there (manually)
7. At pickup: Click "Start Ride" button
8. GPS updates show on map in real-time
9. Driver navigates to dropoff
10. Arrive at destination: Click "Complete Ride"
11. Confirmation popup
12. Payment processed (smart contract)
13. Back to available rides